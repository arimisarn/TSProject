<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

<header class="flex justify-between items-center px-6 bg-white shadow-sm">
    <img src="../images/logo.png" alt="Logo" class="w-[150px]" />

    <div class="flex items-center space-x-4" id="connected">
        <a
            href="../components/add-book.html"
            class="flex items-center space-x-2 px-4 py-2 rounded text-white font-bold bg-violet-700 hover:bg-violet-700/90 transition"
        >
            <i class="fas fa-book-medical"></i>
            <span>Ajouter un nouveau livre</span>
        </a>
        <button
            id="logout-button"
            class="flex items-center space-x-2 px-4 py-2 rounded text-black font-bold border-2 border-violet-700 transition"
        >
            <i class="fas fa-sign-out-alt"></i>
            <span>Se déconnecter</span>
        </button>
    </div>
</header>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const logoutButton = document.getElementById('logout-button');
    const connectedDiv = document.getElementById('connected');

    // Gestion de la déconnexion
    if (logoutButton) {
        logoutButton.addEventListener('click', () => {
            // Supprimer les informations de connexion de l'utilisateur (par exemple, du localStorage)
            localStorage.removeItem('loggedInUser');
            alert('Déconnexion réussie !');
            // Rediriger l'utilisateur vers la page de connexion ou d'accueil
            window.location.href = '../auth/login.html'; // Assurez-vous que le chemin est correct

            // Rafraîchir la page pour mettre à jour l'affichage
            // window.location.reload(); // Suppression du rechargement, peut causer des problèmes de redirection
        });
    }

    // Vérification de la connexion (optionnel, à adapter à votre logique)
    const loggedInUser = localStorage.getItem('loggedInUser');
    if (!loggedInUser) {
        // Si l'utilisateur n'est pas connecté, masquer la section "connecté"
        if (connectedDiv) {
            connectedDiv.style.display = 'none';
        }
        // Rediriger vers la page de connexion
        window.location.href = '../auth/login.html'; // Décommentez si vous voulez forcer la redirection
    }
});
</script>
